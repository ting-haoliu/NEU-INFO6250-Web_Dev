{"version":3,"file":"demo.js","mappings":"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","sources":["webpack://08-js-service-calls/./src/services.js","webpack://08-js-service-calls/./src/state.js","webpack://08-js-service-calls/./src/view.js","webpack://08-js-service-calls/webpack/bootstrap","webpack://08-js-service-calls/webpack/runtime/define property getters","webpack://08-js-service-calls/webpack/runtime/hasOwnProperty shorthand","webpack://08-js-service-calls/webpack/runtime/make namespace object","webpack://08-js-service-calls/./src/app.js"],"sourcesContent":["export const MESSAGES = {\n  'network-error': \"Server unavailable, pleaser try again\",\n  'required-username': \"The username is only made up of underscore, letters and/or numbers. Please correct!\",\n  'auth-insufficient': \"Bad username, dog is NOT allowed! \",\n  'required-word': \"Please input a word\",\n  'invalid-word': \"Please input an valid word\",\n  'auth-missing': 'Authentication missing. Please log in first.',\n  default: \"Something went wrong, please try again\",\n}\n\nexport function fetchLogin(username) {\n  return fetch('/api/session/', {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify({ username }),\n  })\n    .catch(err => Promise.reject({ error: 'network-error' }))\n    .then(response => {\n      if (!response.ok) {\n        return response.json().then(err => Promise.reject(err));\n      }\n      return response.json();\n    });\n}\n\nexport function fetchLogout() {\n  return fetch('/api/session', {\n    method: 'DELETE',\n  })\n    .catch(err => Promise.reject({ error: 'network-error' }))\n    .then(response => {\n      if (!response.ok) {\n        return response.json().then(err => Promise.reject(err));\n      }\n      return response.json();\n    })\n}\n\nexport function checkSession() {\n  return fetch('/api/session')\n    .catch(err => Promise.reject({ error: 'network-error' }))\n    .then(response => {\n      if (!response.ok) {\n        return response.json().then(err => Promise.reject(err));\n      }\n      return response.json();\n    });\n}\n\nexport function getStoredWord() {\n  return fetch('/api/word')\n    .catch(err => Promise.reject({ error: 'network-error' }))\n    .then(response => {\n      if (!response.ok) {\n        return response.json().then(err => Promise.reject(err));\n      }\n      return response.json();\n    });\n}\n\n\nexport function updateStoredWord(word) {\n  return fetch('/api/word', {\n    method: 'PUT',\n    headers: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify({ word }),\n  })\n    .catch(err => Promise.reject({ error: 'network-error' }))\n    .then(response => {\n      if (!response.ok) {\n        return response.json().then(err => Promise.reject(err));\n      }\n      return response.json();\n    });\n}\n","export const state = {\n    isLoggedIn: false,\n    username: '',\n    storedWord: '',\n    loginError: '',\n    updateError: '',\n};","import { state } from \"./state\";\n\nexport function render() {\n    const appEL = document.querySelector('#app');\n\n    if (!state.isLoggedIn) {\n        appEL.innerHTML = renderLogin();\n    } else {\n        appEL.innerHTML = renderWord();\n    }\n}\n\nfunction renderLogin() {\n    return `\n        <div class=\"login-container\">\n            <h2 class=\"login-title\">Login</h2>\n            <form class=\"login-form\">\n                <label class=\"login-form__label\">\n                    <p class=\"login-form__label-text\">Username:</p>\n                    <input class=\"login-form__input\" type=\"text\" name=\"username\" required>\n                </label>\n                <button id=\"login-button\" type=\"submit\">Login</button>\n            </form>\n            ${state.loginError ? `<p class=\"login-error\">${state.loginError}</p>` : ''}\n        </div>\n    `;\n}\n\nfunction renderWord() {\n    return `\n        <div class=\"word-container\">\n            <h2 class=\"word-title\">Hello, ${state.username}</h2>\n            <p class=\"word-content\">Your current stored word is: ${state.storedWord}</p>\n            <form class=\"update-form\">\n                <label class=\"update-form__label\">\n                    <span class=\"update-form__label-text\">Update stored word:</span>\n                    <input class=\"update-form__input\" type=\"text\" name=\"newWord\" value=\"${state.storedWord}\">\n                </label>\n                <button id=\"update-button\" type=\"submit\">Update</button>\n            </form>\n            ${state.updateError ? `<p class=\"update-error\">${state.updateError}</p>` : ''}\n            <button id=\"logout-button\">Logout</button>\n        </div>\n    `;\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { render } from \"./view\";\nimport { state } from \"./state\";\nimport { MESSAGES, fetchLogin, fetchLogout, checkSession, getStoredWord, updateStoredWord } from \"./services\";\n\nfunction init() {\n    checkSession()\n        .then(response => {\n            state.isLoggedIn = true;\n            state.username = response.username;\n            return getStoredWord();\n        })\n        .then(wordResponse => {\n            state.storedWord = wordResponse.storedWord;\n            state.loginError = '';\n        })\n        .catch(error => {\n            if (error.error === 'auth-missing') {\n                state.username = '';\n                state.isLoggedIn = false;\n                state.storedWord = '';\n                state.loginError = '';\n            } else {\n                state.loginError = MESSAGES[error.error] || MESSAGES.default;\n            }\n        })\n        .finally(() => {\n            render();\n        });\n}\n\ninit();\n\nconst appEL = document.querySelector('#app');\n\nappEL.addEventListener('click', (event) => {\n    if (event.target.id === 'login-button') {\n        const username = document.querySelector('.login-form__input').value;\n\n        fetchLogin(username)\n            .then(response => {\n                state.isLoggedIn = true;\n                state.username = response.username;\n                state.loginError = '';\n                return getStoredWord();\n            })\n            .then(wordResponse => {\n                state.storedWord = wordResponse.storedWord;\n            })\n            .catch(error => {\n                if (error.error === 'required-username' || error.error === 'auth-insufficient') {\n                    state.loginError = MESSAGES[error.error];\n                } else {\n                    state.loginError = MESSAGES[error.error] || MESSAGES.default;\n                }\n            })\n            .finally(() => {\n                render();\n            });\n\n        event.preventDefault();\n    }\n\n    if (event.target.id === 'logout-button') {\n        fetchLogout()\n            .then(() => {\n                state.isLoggedIn = false;\n                state.username = '';\n                state.storedWord = '';\n                state.updateError = '';\n            })\n            .finally(() => {\n                render();\n            });\n    }\n\n    if (event.target.id === 'update-button') {\n        const newWord = document.querySelector('.update-form__input').value;\n\n        updateStoredWord(newWord)\n            .then(() => {\n                state.storedWord = newWord;\n                state.updateError = '';\n            })\n            .catch(error => {\n                if (error.error === 'auth-missing') {\n                    state.isLoggedIn = false;\n                    state.loginError = MESSAGES[error.error];\n                } else if (error.error === 'required-word' || error.error === 'invalid-word') {\n                    state.updateError = MESSAGES[error.error];\n                } else {\n                    state.updateError = MESSAGES[error.error] || MESSAGES.default;\n                }\n            })\n            .finally(() => {\n                render();\n            });\n\n        event.preventDefault();\n    }\n});"],"names":["MESSAGES","fetchLogin","username","fetch","method","headers","body","JSON","stringify","err","Promise","reject","error","then","response","ok","json","fetchLogout","checkSession","getStoredWord","updateStoredWord","word","state","isLoggedIn","storedWord","loginError","updateError","render","appEL","document","querySelector","innerHTML","renderLogin","renderWord","concat","init","wordResponse","addEventListener","event","target","id","value","preventDefault","newWord"],"sourceRoot":""}